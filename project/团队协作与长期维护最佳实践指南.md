# 3AIé¡¹ç›®å›¢é˜Ÿåä½œä¸é•¿æœŸç»´æŠ¤æœ€ä½³å®è·µæŒ‡å—

## æ¨è€å¸ˆï¼Œæ‚¨å¥½ï¼

åŸºäºå¯¹é¡¹ç›®çš„æ·±å…¥åˆ†æï¼Œæˆ‘ä¸ºæ‚¨æä¾›å›¢é˜Ÿåä½œå’Œé•¿æœŸç»´æŠ¤çš„æœ€ä½³å®è·µå»ºè®®ï¼Œè¿™äº›å°†ç¡®ä¿é¡¹ç›®åœ¨å›¢é˜Ÿæ‰©å±•å’Œé•¿æœŸå‘å±•ä¸­ä¿æŒé«˜è´¨é‡ã€‚

## ğŸ¤ å›¢é˜Ÿåä½œæœ€ä½³å®è·µ

### 1. ä»£ç å®¡æŸ¥æµç¨‹ä¼˜åŒ–

#### 1.1 æ™ºèƒ½ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•

```markdown
# ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•æ¨¡æ¿

## åŠŸèƒ½æ€§æ£€æŸ¥
- [ ] åŠŸèƒ½æ˜¯å¦æŒ‰éœ€æ±‚æ­£ç¡®å®ç°
- [ ] è¾¹ç•Œæ¡ä»¶æ˜¯å¦æ­£ç¡®å¤„ç†
- [ ] é”™è¯¯åœºæ™¯æ˜¯å¦æœ‰é€‚å½“å¤„ç†
- [ ] æ€§èƒ½æ˜¯å¦æ»¡è¶³è¦æ±‚

## ä»£ç è´¨é‡æ£€æŸ¥
- [ ] ä»£ç æ˜¯å¦éµå¾ªé¡¹ç›®ç¼–ç è§„èŒƒ
- [ ] å‡½æ•°æ˜¯å¦å•ä¸€èŒè´£ï¼Œé•¿åº¦åˆç†ï¼ˆ<50è¡Œï¼‰
- [ ] å˜é‡å‘½åæ˜¯å¦æ¸…æ™°è¡¨è¾¾æ„å›¾
- [ ] æ˜¯å¦æœ‰é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£

## å®‰å…¨æ€§æ£€æŸ¥
- [ ] è¾“å…¥éªŒè¯æ˜¯å¦å……åˆ†
- [ ] æ•æ„Ÿä¿¡æ¯æ˜¯å¦æ­£ç¡®å¤„ç†
- [ ] æƒé™æ§åˆ¶æ˜¯å¦æ­£ç¡®
- [ ] SQLæ³¨å…¥ç­‰å®‰å…¨æ¼æ´æ˜¯å¦é˜²èŒƒ

## æµ‹è¯•è¦†ç›–
- [ ] æ˜¯å¦æœ‰å¯¹åº”çš„å•å…ƒæµ‹è¯•
- [ ] æµ‹è¯•ç”¨ä¾‹æ˜¯å¦è¦†ç›–ä¸»è¦åœºæ™¯
- [ ] é›†æˆæµ‹è¯•æ˜¯å¦é€šè¿‡
- [ ] æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ï¼ˆ>85%ï¼‰

## æ¶æ„ä¸€è‡´æ€§
- [ ] æ˜¯å¦éµå¾ªé¡¹ç›®æ¶æ„æ¨¡å¼
- [ ] ä¾èµ–å…³ç³»æ˜¯å¦åˆç†
- [ ] æ˜¯å¦å¼•å…¥ä¸å¿…è¦çš„å¤æ‚æ€§
- [ ] æ˜¯å¦æœ‰æŠ€æœ¯å€ºåŠ¡éœ€è¦è®°å½•
```

#### 1.2 è‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥å·¥å…·é…ç½®

```typescript
// .github/workflows/code-review.yml
name: è‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥

on:
  pull_request:
    branches: [ main, develop ]

jobs:
  code-review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: è®¾ç½®Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: å®‰è£…ä¾èµ–
        run: npm ci
      
      - name: ä»£ç è´¨é‡æ£€æŸ¥
        run: |
          npm run lint
          npm run type-check
          npm run test:coverage
      
      - name: å®‰å…¨æ‰«æ
        run: npm audit --audit-level moderate
      
      - name: ä»£ç å¤æ‚åº¦åˆ†æ
        run: npx complexity-report src/
      
      - name: ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Š
        run: |
          echo "## ä»£ç å®¡æŸ¥æŠ¥å‘Š" >> $GITHUB_STEP_SUMMARY
          echo "### è´¨é‡æŒ‡æ ‡" >> $GITHUB_STEP_SUMMARY
          npm run quality:report >> $GITHUB_STEP_SUMMARY
```

### 2. çŸ¥è¯†ç®¡ç†ä¸æ–‡æ¡£åŒ–

#### 2.1 æŠ€æœ¯å†³ç­–è®°å½•ï¼ˆADRï¼‰æ¨¡æ¿

```markdown
# ADR-001: é€‰æ‹©å…­è¾¹å½¢æ¶æ„æ¨¡å¼

## çŠ¶æ€
å·²æ¥å—

## èƒŒæ™¯
é¡¹ç›®éœ€è¦ä¸€ä¸ªæ¸…æ™°çš„æ¶æ„æ¨¡å¼æ¥åˆ†ç¦»ä¸šåŠ¡é€»è¾‘å’ŒæŠ€æœ¯å®ç°ï¼Œæé«˜ä»£ç çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## å†³ç­–
é‡‡ç”¨å…­è¾¹å½¢æ¶æ„ï¼ˆç«¯å£å’Œé€‚é…å™¨æ¨¡å¼ï¼‰æ¥ç»„ç»‡ä»£ç ç»“æ„ã€‚

## ç†ç”±
1. **ä¸šåŠ¡é€»è¾‘éš”ç¦»**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¸ä¾èµ–å¤–éƒ¨æ¡†æ¶
2. **å¯æµ‹è¯•æ€§**ï¼šæ˜“äºç¼–å†™å•å…ƒæµ‹è¯•
3. **å¯æ‰©å±•æ€§**ï¼šæ–°çš„é€‚é…å™¨å¯ä»¥è½»æ¾æ·»åŠ 
4. **æŠ€æœ¯æ ˆç‹¬ç«‹**ï¼šå¯ä»¥è½»æ¾æ›´æ¢æŠ€æœ¯æ ˆ

## åæœ
### æ­£é¢å½±å“
- ä»£ç ç»“æ„æ›´æ¸…æ™°
- æµ‹è¯•è¦†ç›–ç‡æå‡
- ç»´æŠ¤æˆæœ¬é™ä½

### è´Ÿé¢å½±å“
- åˆæœŸå¼€å‘å¤æ‚åº¦å¢åŠ 
- éœ€è¦å›¢é˜Ÿå­¦ä¹ æ–°çš„æ¶æ„æ¨¡å¼

## å®æ–½è®¡åˆ’
1. ç¬¬1å‘¨ï¼šåˆ›å»ºåŸºç¡€æ¶æ„ç»“æ„
2. ç¬¬2å‘¨ï¼šè¿ç§»ç°æœ‰ä»£ç 
3. ç¬¬3å‘¨ï¼šå®Œå–„æµ‹è¯•è¦†ç›–
4. ç¬¬4å‘¨ï¼šå›¢é˜ŸåŸ¹è®­å’Œæ–‡æ¡£å®Œå–„
```

#### 2.2 APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

```typescript
// src/docs/swagger.ts
import swaggerJsdoc from 'swagger-jsdoc';
import swaggerUi from 'swagger-ui-express';
import { Express } from 'express';

const options = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: '3AIé¡¹ç›®APIæ–‡æ¡£',
      version: '1.0.0',
      description: '3AIé¡¹ç›®çš„RESTful APIæ¥å£æ–‡æ¡£',
      contact: {
        name: 'æŠ€æœ¯å›¢é˜Ÿ',
        email: 'tech@3ai.com'
      }
    },
    servers: [
      {
        url: 'http://localhost:3000',
        description: 'å¼€å‘ç¯å¢ƒ'
      },
      {
        url: 'https://api.3ai.com',
        description: 'ç”Ÿäº§ç¯å¢ƒ'
      }
    ],
    components: {
      securitySchemes: {
        bearerAuth: {
          type: 'http',
          scheme: 'bearer',
          bearerFormat: 'JWT'
        }
      },
      schemas: {
        Error: {
          type: 'object',
          properties: {
            success: {
              type: 'boolean',
              example: false
            },
            error: {
              type: 'object',
              properties: {
                code: {
                  type: 'string',
                  example: 'VALIDATION_ERROR'
                },
                message: {
                  type: 'string',
                  example: 'è¾“å…¥æ•°æ®éªŒè¯å¤±è´¥'
                },
                details: {
                  type: 'object',
                  example: { field: 'email', reason: 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®' }
                }
              }
            }
          }
        },
        User: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              example: 'user_123456'
            },
            email: {
              type: 'string',
              format: 'email',
              example: 'user@example.com'
            },
            name: {
              type: 'string',
              example: 'å¼ ä¸‰'
            },
            createdAt: {
              type: 'string',
              format: 'date-time',
              example: '2024-01-01T00:00:00Z'
            }
          }
        }
      }
    }
  },
  apis: ['./src/routes/*.ts', './src/controllers/*.ts']
};

const specs = swaggerJsdoc(options);

export function setupSwagger(app: Express): void {
  app.use('/api/docs', swaggerUi.serve, swaggerUi.setup(specs, {
    explorer: true,
    customCss: '.swagger-ui .topbar { display: none }',
    customSiteTitle: '3AI APIæ–‡æ¡£'
  }));
  
  // æä¾›JSONæ ¼å¼çš„APIè§„èŒƒ
  app.get('/api/docs.json', (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    res.send(specs);
  });
}

/**
 * @swagger
 * /api/users:
 *   post:
 *     summary: åˆ›å»ºæ–°ç”¨æˆ·
 *     tags: [ç”¨æˆ·ç®¡ç†]
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             required:
 *               - email
 *               - name
 *             properties:
 *               email:
 *                 type: string
 *                 format: email
 *                 description: ç”¨æˆ·é‚®ç®±
 *               name:
 *                 type: string
 *                 description: ç”¨æˆ·å§“å
 *             example:
 *               email: "user@example.com"
 *               name: "å¼ ä¸‰"
 *     responses:
 *       201:
 *         description: ç”¨æˆ·åˆ›å»ºæˆåŠŸ
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   $ref: '#/components/schemas/User'
 *       400:
 *         description: è¯·æ±‚å‚æ•°é”™è¯¯
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Error'
 *       409:
 *         description: ç”¨æˆ·å·²å­˜åœ¨
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Error'
 */
```

### 3. æŒç»­é›†æˆä¸éƒ¨ç½²ä¼˜åŒ–

#### 3.1 å¤šç¯å¢ƒé…ç½®ç®¡ç†

```typescript
// src/config/environment.ts
import { z } from 'zod';

// ç¯å¢ƒé…ç½®éªŒè¯æ¨¡å¼
const EnvironmentSchema = z.object({
  NODE_ENV: z.enum(['development', 'test', 'staging', 'production']),
  PORT: z.string().transform(Number).pipe(z.number().min(1).max(65535)),
  DATABASE_URL: z.string().url(),
  REDIS_URL: z.string().url(),
  JWT_SECRET: z.string().min(32),
  LOG_LEVEL: z.enum(['error', 'warn', 'info', 'debug']),
  API_RATE_LIMIT: z.string().transform(Number).pipe(z.number().positive()),
  CACHE_TTL: z.string().transform(Number).pipe(z.number().positive()),
  CORS_ORIGINS: z.string().transform(str => str.split(',')),
  MONITORING_ENABLED: z.string().transform(str => str === 'true'),
  SENTRY_DSN: z.string().url().optional(),
  SMTP_HOST: z.string().optional(),
  SMTP_PORT: z.string().transform(Number).pipe(z.number()).optional(),
  SMTP_USER: z.string().optional(),
  SMTP_PASS: z.string().optional()
});

type Environment = z.infer<typeof EnvironmentSchema>;

class EnvironmentConfig {
  private static instance: EnvironmentConfig;
  private config: Environment;

  private constructor() {
    this.validateAndLoad();
  }

  public static getInstance(): EnvironmentConfig {
    if (!EnvironmentConfig.instance) {
      EnvironmentConfig.instance = new EnvironmentConfig();
    }
    return EnvironmentConfig.instance;
  }

  private validateAndLoad(): void {
    try {
      this.config = EnvironmentSchema.parse(process.env);
      console.log(`âœ… ç¯å¢ƒé…ç½®éªŒè¯æˆåŠŸ (${this.config.NODE_ENV})`);
    } catch (error) {
      if (error instanceof z.ZodError) {
        console.error('âŒ ç¯å¢ƒé…ç½®éªŒè¯å¤±è´¥:');
        error.errors.forEach(err => {
          console.error(`  - ${err.path.join('.')}: ${err.message}`);
        });
        process.exit(1);
      }
      throw error;
    }
  }

  public get<K extends keyof Environment>(key: K): Environment[K] {
    return this.config[key];
  }

  public getAll(): Environment {
    return { ...this.config };
  }

  public isDevelopment(): boolean {
    return this.config.NODE_ENV === 'development';
  }

  public isProduction(): boolean {
    return this.config.NODE_ENV === 'production';
  }

  public isTest(): boolean {
    return this.config.NODE_ENV === 'test';
  }
}

export const env = EnvironmentConfig.getInstance();
```

#### 3.2 éƒ¨ç½²å¥åº·æ£€æŸ¥

```typescript
// src/health/HealthChecker.ts
import { Request, Response } from 'express';
import { logger } from '../utils/logger';
import { env } from '../config/environment';

interface HealthCheckResult {
  status: 'healthy' | 'unhealthy' | 'degraded';
  timestamp: string;
  uptime: number;
  version: string;
  environment: string;
  checks: Record<string, {
    status: 'pass' | 'fail' | 'warn';
    message?: string;
    responseTime?: number;
    details?: any;
  }>;
}

export class HealthChecker {
  private version: string;
  private startTime: number;

  constructor() {
    this.version = process.env.npm_package_version || '1.0.0';
    this.startTime = Date.now();
  }

  async performHealthCheck(): Promise<HealthCheckResult> {
    const checks: HealthCheckResult['checks'] = {};
    
    // æ•°æ®åº“è¿æ¥æ£€æŸ¥
    checks.database = await this.checkDatabase();
    
    // Redisè¿æ¥æ£€æŸ¥
    checks.redis = await this.checkRedis();
    
    // å†…å­˜ä½¿ç”¨æ£€æŸ¥
    checks.memory = this.checkMemoryUsage();
    
    // ç£ç›˜ç©ºé—´æ£€æŸ¥
    checks.disk = await this.checkDiskSpace();
    
    // å¤–éƒ¨æœåŠ¡æ£€æŸ¥
    checks.external_services = await this.checkExternalServices();
    
    // ç¡®å®šæ•´ä½“çŠ¶æ€
    const overallStatus = this.determineOverallStatus(checks);
    
    return {
      status: overallStatus,
      timestamp: new Date().toISOString(),
      uptime: Date.now() - this.startTime,
      version: this.version,
      environment: env.get('NODE_ENV'),
      checks
    };
  }

  private async checkDatabase(): Promise<HealthCheckResult['checks'][string]> {
    const startTime = Date.now();
    try {
      // è¿™é‡Œåº”è¯¥æ˜¯å®é™…çš„æ•°æ®åº“è¿æ¥æ£€æŸ¥
      // const result = await db.raw('SELECT 1');
      const responseTime = Date.now() - startTime;
      
      if (responseTime > 1000) {
        return {
          status: 'warn',
          message: 'æ•°æ®åº“å“åº”è¾ƒæ…¢',
          responseTime
        };
      }
      
      return {
        status: 'pass',
        message: 'æ•°æ®åº“è¿æ¥æ­£å¸¸',
        responseTime
      };
    } catch (error) {
      return {
        status: 'fail',
        message: 'æ•°æ®åº“è¿æ¥å¤±è´¥',
        responseTime: Date.now() - startTime,
        details: error.message
      };
    }
  }

  private async checkRedis(): Promise<HealthCheckResult['checks'][string]> {
    const startTime = Date.now();
    try {
      // è¿™é‡Œåº”è¯¥æ˜¯å®é™…çš„Redisè¿æ¥æ£€æŸ¥
      // await redis.ping();
      const responseTime = Date.now() - startTime;
      
      return {
        status: 'pass',
        message: 'Redisè¿æ¥æ­£å¸¸',
        responseTime
      };
    } catch (error) {
      return {
        status: 'fail',
        message: 'Redisè¿æ¥å¤±è´¥',
        responseTime: Date.now() - startTime,
        details: error.message
      };
    }
  }

  private checkMemoryUsage(): HealthCheckResult['checks'][string] {
    const memUsage = process.memoryUsage();
    const heapUsedMB = Math.round(memUsage.heapUsed / 1024 / 1024);
    const heapTotalMB = Math.round(memUsage.heapTotal / 1024 / 1024);
    const usagePercent = (heapUsedMB / heapTotalMB) * 100;
    
    if (usagePercent > 90) {
      return {
        status: 'fail',
        message: 'å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜',
        details: { heapUsedMB, heapTotalMB, usagePercent }
      };
    } else if (usagePercent > 75) {
      return {
        status: 'warn',
        message: 'å†…å­˜ä½¿ç”¨ç‡è¾ƒé«˜',
        details: { heapUsedMB, heapTotalMB, usagePercent }
      };
    }
    
    return {
      status: 'pass',
      message: 'å†…å­˜ä½¿ç”¨æ­£å¸¸',
      details: { heapUsedMB, heapTotalMB, usagePercent }
    };
  }

  private async checkDiskSpace(): Promise<HealthCheckResult['checks'][string]> {
    try {
      // è¿™é‡Œåº”è¯¥æ£€æŸ¥ç£ç›˜ç©ºé—´
      // const stats = await fs.promises.statvfs('/');
      // const freePercent = (stats.f_bavail / stats.f_blocks) * 100;
      
      const freePercent = 85; // æ¨¡æ‹Ÿå€¼
      
      if (freePercent < 10) {
        return {
          status: 'fail',
          message: 'ç£ç›˜ç©ºé—´ä¸è¶³',
          details: { freePercent }
        };
      } else if (freePercent < 20) {
        return {
          status: 'warn',
          message: 'ç£ç›˜ç©ºé—´è¾ƒå°‘',
          details: { freePercent }
        };
      }
      
      return {
        status: 'pass',
        message: 'ç£ç›˜ç©ºé—´å……è¶³',
        details: { freePercent }
      };
    } catch (error) {
      return {
        status: 'fail',
        message: 'æ— æ³•æ£€æŸ¥ç£ç›˜ç©ºé—´',
        details: error.message
      };
    }
  }

  private async checkExternalServices(): Promise<HealthCheckResult['checks'][string]> {
    // æ£€æŸ¥å¤–éƒ¨APIæœåŠ¡çš„å¯ç”¨æ€§
    const services = [
      { name: 'é‚®ä»¶æœåŠ¡', url: 'https://smtp.example.com' },
      { name: 'æ”¯ä»˜æœåŠ¡', url: 'https://api.payment.com' }
    ];
    
    const results = await Promise.allSettled(
      services.map(async service => {
        const startTime = Date.now();
        try {
          // const response = await fetch(service.url, { timeout: 5000 });
          // return { name: service.name, status: 'pass', responseTime: Date.now() - startTime };
          return { name: service.name, status: 'pass', responseTime: 100 }; // æ¨¡æ‹Ÿ
        } catch (error) {
          return { name: service.name, status: 'fail', error: error.message };
        }
      })
    );
    
    const failedServices = results
      .filter(result => result.status === 'fulfilled' && result.value.status === 'fail')
      .map(result => result.status === 'fulfilled' ? result.value.name : '');
    
    if (failedServices.length > 0) {
      return {
        status: 'warn',
        message: `éƒ¨åˆ†å¤–éƒ¨æœåŠ¡ä¸å¯ç”¨: ${failedServices.join(', ')}`,
        details: results
      };
    }
    
    return {
      status: 'pass',
      message: 'æ‰€æœ‰å¤–éƒ¨æœåŠ¡æ­£å¸¸',
      details: results
    };
  }

  private determineOverallStatus(checks: HealthCheckResult['checks']): 'healthy' | 'unhealthy' | 'degraded' {
    const statuses = Object.values(checks).map(check => check.status);
    
    if (statuses.includes('fail')) {
      return 'unhealthy';
    } else if (statuses.includes('warn')) {
      return 'degraded';
    }
    
    return 'healthy';
  }

  // Expressè·¯ç”±å¤„ç†å™¨
  async handleHealthCheck(req: Request, res: Response): Promise<void> {
    try {
      const healthResult = await this.performHealthCheck();
      
      const statusCode = {
        healthy: 200,
        degraded: 200,
        unhealthy: 503
      }[healthResult.status];
      
      res.status(statusCode).json(healthResult);
      
      // è®°å½•å¥åº·æ£€æŸ¥ç»“æœ
      if (healthResult.status === 'unhealthy') {
        logger.error('å¥åº·æ£€æŸ¥å¤±è´¥', healthResult);
      } else if (healthResult.status === 'degraded') {
        logger.warn('å¥åº·æ£€æŸ¥è­¦å‘Š', healthResult);
      }
    } catch (error) {
      logger.error('å¥åº·æ£€æŸ¥å¼‚å¸¸', error);
      res.status(503).json({
        status: 'unhealthy',
        timestamp: new Date().toISOString(),
        error: 'å¥åº·æ£€æŸ¥æ‰§è¡Œå¤±è´¥'
      });
    }
  }
}
```

## ğŸ”§ é•¿æœŸç»´æŠ¤ç­–ç•¥

### 1. æŠ€æœ¯å€ºåŠ¡ç®¡ç†

#### 1.1 æŠ€æœ¯å€ºåŠ¡è·Ÿè¸ªç³»ç»Ÿ

```typescript
// src/utils/TechnicalDebtTracker.ts
export interface TechnicalDebt {
  id: string;
  title: string;
  description: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
  category: 'code_quality' | 'performance' | 'security' | 'architecture' | 'documentation';
  estimatedEffort: number; // å°æ—¶
  businessImpact: string;
  technicalImpact: string;
  createdAt: Date;
  assignee?: string;
  dueDate?: Date;
  status: 'identified' | 'planned' | 'in_progress' | 'resolved' | 'deferred';
  relatedFiles: string[];
  tags: string[];
}

export class TechnicalDebtTracker {
  private debts: Map<string, TechnicalDebt> = new Map();

  addDebt(debt: Omit<TechnicalDebt, 'id' | 'createdAt'>): string {
    const id = `debt_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const newDebt: TechnicalDebt = {
      ...debt,
      id,
      createdAt: new Date()
    };
    
    this.debts.set(id, newDebt);
    this.logDebtCreation(newDebt);
    return id;
  }

  updateDebt(id: string, updates: Partial<TechnicalDebt>): boolean {
    const debt = this.debts.get(id);
    if (!debt) return false;
    
    const updatedDebt = { ...debt, ...updates };
    this.debts.set(id, updatedDebt);
    this.logDebtUpdate(updatedDebt, updates);
    return true;
  }

  getDebtsByPriority(): TechnicalDebt[] {
    const severityOrder = { critical: 4, high: 3, medium: 2, low: 1 };
    return Array.from(this.debts.values())
      .sort((a, b) => severityOrder[b.severity] - severityOrder[a.severity]);
  }

  getDebtsByCategory(category: TechnicalDebt['category']): TechnicalDebt[] {
    return Array.from(this.debts.values())
      .filter(debt => debt.category === category);
  }

  generateReport(): {
    summary: {
      total: number;
      bySeverity: Record<TechnicalDebt['severity'], number>;
      byCategory: Record<TechnicalDebt['category'], number>;
      byStatus: Record<TechnicalDebt['status'], number>;
      totalEstimatedEffort: number;
    };
    recommendations: string[];
  } {
    const debts = Array.from(this.debts.values());
    
    const summary = {
      total: debts.length,
      bySeverity: this.groupBy(debts, 'severity'),
      byCategory: this.groupBy(debts, 'category'),
      byStatus: this.groupBy(debts, 'status'),
      totalEstimatedEffort: debts.reduce((sum, debt) => sum + debt.estimatedEffort, 0)
    };
    
    const recommendations = this.generateRecommendations(summary, debts);
    
    return { summary, recommendations };
  }

  private groupBy<T, K extends keyof T>(array: T[], key: K): Record<string, number> {
    return array.reduce((acc, item) => {
      const value = String(item[key]);
      acc[value] = (acc[value] || 0) + 1;
      return acc;
    }, {} as Record<string, number>);
  }

  private generateRecommendations(summary: any, debts: TechnicalDebt[]): string[] {
    const recommendations: string[] = [];
    
    if (summary.bySeverity.critical > 0) {
      recommendations.push(`ğŸš¨ å‘ç°${summary.bySeverity.critical}ä¸ªä¸¥é‡æŠ€æœ¯å€ºåŠ¡ï¼Œå»ºè®®ç«‹å³å¤„ç†`);
    }
    
    if (summary.bySeverity.high > 3) {
      recommendations.push(`âš ï¸ é«˜ä¼˜å…ˆçº§æŠ€æœ¯å€ºåŠ¡è¾ƒå¤š(${summary.bySeverity.high}ä¸ª)ï¼Œå»ºè®®åˆ¶å®šä¸“é¡¹æ¸…ç†è®¡åˆ’`);
    }
    
    if (summary.totalEstimatedEffort > 160) { // è¶…è¿‡4å‘¨å·¥ä½œé‡
      recommendations.push(`ğŸ“Š æŠ€æœ¯å€ºåŠ¡æ€»å·¥ä½œé‡${summary.totalEstimatedEffort}å°æ—¶ï¼Œå»ºè®®åˆ†é˜¶æ®µå¤„ç†`);
    }
    
    const oldDebts = debts.filter(debt => {
      const daysSinceCreated = (Date.now() - debt.createdAt.getTime()) / (1000 * 60 * 60 * 24);
      return daysSinceCreated > 30;
    });
    
    if (oldDebts.length > 0) {
      recommendations.push(`â° å‘ç°${oldDebts.length}ä¸ªè¶…è¿‡30å¤©çš„æŠ€æœ¯å€ºåŠ¡ï¼Œå»ºè®®ä¼˜å…ˆå¤„ç†`);
    }
    
    return recommendations;
  }

  private logDebtCreation(debt: TechnicalDebt): void {
    logger.info('æŠ€æœ¯å€ºåŠ¡å·²è®°å½•', {
      id: debt.id,
      title: debt.title,
      severity: debt.severity,
      category: debt.category
    });
  }

  private logDebtUpdate(debt: TechnicalDebt, updates: Partial<TechnicalDebt>): void {
    logger.info('æŠ€æœ¯å€ºåŠ¡å·²æ›´æ–°', {
      id: debt.id,
      updates: Object.keys(updates),
      status: debt.status
    });
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const debtTracker = new TechnicalDebtTracker();

// è®°å½•æŠ€æœ¯å€ºåŠ¡
debtTracker.addDebt({
  title: 'ç”¨æˆ·æœåŠ¡ç¼ºä¹è¾“å…¥éªŒè¯',
  description: 'ç”¨æˆ·åˆ›å»ºå’Œæ›´æ–°æ¥å£ç¼ºä¹å®Œæ•´çš„è¾“å…¥éªŒè¯ï¼Œå­˜åœ¨å®‰å…¨é£é™©',
  severity: 'high',
  category: 'security',
  estimatedEffort: 8,
  businessImpact: 'å¯èƒ½å¯¼è‡´æ•°æ®å®‰å…¨é—®é¢˜ï¼Œå½±å“ç”¨æˆ·ä¿¡ä»»',
  technicalImpact: 'ç³»ç»Ÿç¨³å®šæ€§é£é™©ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®æŸå',
  relatedFiles: ['src/services/UserService.ts', 'src/controllers/UserController.ts'],
  tags: ['validation', 'security', 'user-management'],
  status: 'identified'
});
```

#### 1.2 ä»£ç é‡æ„æŒ‡å—

```typescript
// src/refactoring/RefactoringGuide.ts
export interface RefactoringTask {
  name: string;
  description: string;
  priority: 'low' | 'medium' | 'high';
  estimatedEffort: number;
  riskLevel: 'low' | 'medium' | 'high';
  prerequisites: string[];
  steps: RefactoringStep[];
  testingStrategy: string;
  rollbackPlan: string;
}

export interface RefactoringStep {
  description: string;
  codeChanges: string[];
  testRequirements: string[];
  validationCriteria: string[];
}

export const refactoringTasks: RefactoringTask[] = [
  {
    name: 'æå–ç”¨æˆ·éªŒè¯é€»è¾‘',
    description: 'å°†åˆ†æ•£åœ¨å„ä¸ªæ§åˆ¶å™¨ä¸­çš„ç”¨æˆ·éªŒè¯é€»è¾‘æå–åˆ°ä¸“é—¨çš„éªŒè¯æœåŠ¡ä¸­',
    priority: 'high',
    estimatedEffort: 16,
    riskLevel: 'medium',
    prerequisites: [
      'å®Œæˆç”¨æˆ·ç›¸å…³çš„å•å…ƒæµ‹è¯•',
      'ç¡®ä¿æ‰€æœ‰ç”¨æˆ·æ¥å£çš„é›†æˆæµ‹è¯•é€šè¿‡'
    ],
    steps: [
      {
        description: 'åˆ›å»ºç”¨æˆ·éªŒè¯æœåŠ¡',
        codeChanges: [
          'åˆ›å»º src/services/UserValidationService.ts',
          'å®šä¹‰éªŒè¯æ¥å£å’Œé”™è¯¯ç±»å‹',
          'å®ç°åŸºç¡€éªŒè¯æ–¹æ³•'
        ],
        testRequirements: [
          'ä¸ºéªŒè¯æœåŠ¡ç¼–å†™å•å…ƒæµ‹è¯•',
          'æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°90%ä»¥ä¸Š'
        ],
        validationCriteria: [
          'æ‰€æœ‰éªŒè¯æ–¹æ³•æ­£ç¡®å·¥ä½œ',
          'é”™è¯¯å¤„ç†ç¬¦åˆé¡¹ç›®æ ‡å‡†',
          'æ€§èƒ½æ»¡è¶³è¦æ±‚ï¼ˆ<10msï¼‰'
        ]
      },
      {
        description: 'é‡æ„ç”¨æˆ·æ§åˆ¶å™¨',
        codeChanges: [
          'æ›´æ–° UserController ä½¿ç”¨æ–°çš„éªŒè¯æœåŠ¡',
          'ç§»é™¤é‡å¤çš„éªŒè¯ä»£ç ',
          'ç»Ÿä¸€é”™è¯¯å¤„ç†'
        ],
        testRequirements: [
          'æ›´æ–°æ§åˆ¶å™¨æµ‹è¯•',
          'ç¡®ä¿APIè¡Œä¸ºä¿æŒä¸€è‡´'
        ],
        validationCriteria: [
          'APIå“åº”æ ¼å¼ä¸å˜',
          'æ‰€æœ‰ç°æœ‰æµ‹è¯•é€šè¿‡',
          'æ–°çš„éªŒè¯é€»è¾‘æ­£ç¡®å·¥ä½œ'
        ]
      }
    ],
    testingStrategy: 'é‡‡ç”¨æ¸è¿›å¼é‡æ„ï¼Œæ¯æ¬¡åªé‡æ„ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œç¡®ä¿æµ‹è¯•é€šè¿‡åå†ç»§ç»­ä¸‹ä¸€ä¸ª',
    rollbackPlan: 'ä¿ç•™åŸæœ‰ä»£ç çš„å¤‡ä»½åˆ†æ”¯ï¼Œå¦‚æœ‰é—®é¢˜å¯å¿«é€Ÿå›æ»šåˆ°é‡æ„å‰çŠ¶æ€'
  }
];
```

### 2. æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–

#### 2.1 æ€§èƒ½åŸºå‡†æµ‹è¯•

```typescript
// src/performance/BenchmarkSuite.ts
import { performance } from 'perf_hooks';
import { logger } from '../utils/logger';

export interface BenchmarkResult {
  name: string;
  duration: number;
  memoryUsage: {
    before: NodeJS.MemoryUsage;
    after: NodeJS.MemoryUsage;
    delta: number;
  };
  iterations: number;
  averageTime: number;
  minTime: number;
  maxTime: number;
  standardDeviation: number;
}

export class BenchmarkSuite {
  private results: BenchmarkResult[] = [];

  async benchmark(
    name: string,
    fn: () => Promise<any> | any,
    iterations: number = 100
  ): Promise<BenchmarkResult> {
    logger.info(`å¼€å§‹æ€§èƒ½æµ‹è¯•: ${name}`);
    
    const times: number[] = [];
    const memoryBefore = process.memoryUsage();
    
    // é¢„çƒ­
    for (let i = 0; i < Math.min(10, iterations); i++) {
      await fn();
    }
    
    // æ­£å¼æµ‹è¯•
    for (let i = 0; i < iterations; i++) {
      const start = performance.now();
      await fn();
      const end = performance.now();
      times.push(end - start);
    }
    
    const memoryAfter = process.memoryUsage();
    const totalDuration = times.reduce((sum, time) => sum + time, 0);
    const averageTime = totalDuration / iterations;
    const minTime = Math.min(...times);
    const maxTime = Math.max(...times);
    
    // è®¡ç®—æ ‡å‡†å·®
    const variance = times.reduce((sum, time) => {
      return sum + Math.pow(time - averageTime, 2);
    }, 0) / iterations;
    const standardDeviation = Math.sqrt(variance);
    
    const result: BenchmarkResult = {
      name,
      duration: totalDuration,
      memoryUsage: {
        before: memoryBefore,
        after: memoryAfter,
        delta: memoryAfter.heapUsed - memoryBefore.heapUsed
      },
      iterations,
      averageTime,
      minTime,
      maxTime,
      standardDeviation
    };
    
    this.results.push(result);
    logger.info(`æ€§èƒ½æµ‹è¯•å®Œæˆ: ${name}`, {
      averageTime: `${averageTime.toFixed(2)}ms`,
      minTime: `${minTime.toFixed(2)}ms`,
      maxTime: `${maxTime.toFixed(2)}ms`,
      memoryDelta: `${(result.memoryUsage.delta / 1024 / 1024).toFixed(2)}MB`
    });
    
    return result;
  }

  generateReport(): string {
    if (this.results.length === 0) {
      return 'æ²¡æœ‰æ€§èƒ½æµ‹è¯•ç»“æœ';
    }
    
    let report = '# æ€§èƒ½æµ‹è¯•æŠ¥å‘Š\n\n';
    report += `æµ‹è¯•æ—¶é—´: ${new Date().toISOString()}\n\n`;
    
    report += '## æµ‹è¯•ç»“æœæ¦‚è§ˆ\n\n';
    report += '| æµ‹è¯•åç§° | å¹³å‡æ—¶é—´(ms) | æœ€å°æ—¶é—´(ms) | æœ€å¤§æ—¶é—´(ms) | æ ‡å‡†å·®(ms) | å†…å­˜å˜åŒ–(MB) |\n';
    report += '|---------|-------------|-------------|-------------|-----------|-------------|\n';
    
    this.results.forEach(result => {
      const memoryDeltaMB = (result.memoryUsage.delta / 1024 / 1024).toFixed(2);
      report += `| ${result.name} | ${result.averageTime.toFixed(2)} | ${result.minTime.toFixed(2)} | ${result.maxTime.toFixed(2)} | ${result.standardDeviation.toFixed(2)} | ${memoryDeltaMB} |\n`;
    });
    
    report += '\n## æ€§èƒ½åˆ†æ\n\n';
    
    // æ‰¾å‡ºæœ€æ…¢çš„æ“ä½œ
    const slowestTest = this.results.reduce((prev, current) => 
      prev.averageTime > current.averageTime ? prev : current
    );
    report += `- **æœ€æ…¢æ“ä½œ**: ${slowestTest.name} (${slowestTest.averageTime.toFixed(2)}ms)\n`;
    
    // æ‰¾å‡ºå†…å­˜ä½¿ç”¨æœ€å¤šçš„æ“ä½œ
    const memoryHeaviestTest = this.results.reduce((prev, current) => 
      prev.memoryUsage.delta > current.memoryUsage.delta ? prev : current
    );
    report += `- **å†…å­˜ä½¿ç”¨æœ€å¤š**: ${memoryHeaviestTest.name} (${(memoryHeaviestTest.memoryUsage.delta / 1024 / 1024).toFixed(2)}MB)\n`;
    
    // æ€§èƒ½å»ºè®®
    report += '\n## ä¼˜åŒ–å»ºè®®\n\n';
    this.results.forEach(result => {
      if (result.averageTime > 100) {
        report += `- âš ï¸ ${result.name}: å¹³å‡å“åº”æ—¶é—´è¶…è¿‡100msï¼Œå»ºè®®ä¼˜åŒ–\n`;
      }
      if (result.memoryUsage.delta > 10 * 1024 * 1024) { // 10MB
        report += `- ğŸ” ${result.name}: å†…å­˜ä½¿ç”¨è¾ƒé«˜ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼\n`;
      }
      if (result.standardDeviation > result.averageTime * 0.5) {
        report += `- ğŸ“Š ${result.name}: æ€§èƒ½æ³¢åŠ¨è¾ƒå¤§ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰æ€§èƒ½ç“¶é¢ˆ\n`;
      }
    });
    
    return report;
  }

  clearResults(): void {
    this.results = [];
  }
}

// ä½¿ç”¨ç¤ºä¾‹
export async function runPerformanceTests(): Promise<void> {
  const benchmark = new BenchmarkSuite();
  
  // æµ‹è¯•ç”¨æˆ·åˆ›å»ºæ€§èƒ½
  await benchmark.benchmark('ç”¨æˆ·åˆ›å»º', async () => {
    // æ¨¡æ‹Ÿç”¨æˆ·åˆ›å»ºæ“ä½œ
    const userData = {
      email: `test${Math.random()}@example.com`,
      name: 'æµ‹è¯•ç”¨æˆ·'
    };
    // await userService.createUser(userData);
  }, 50);
  
  // æµ‹è¯•æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
  await benchmark.benchmark('ç”¨æˆ·æŸ¥è¯¢', async () => {
    // æ¨¡æ‹Ÿç”¨æˆ·æŸ¥è¯¢æ“ä½œ
    // await userService.findById('user_123');
  }, 100);
  
  // ç”Ÿæˆå¹¶ä¿å­˜æŠ¥å‘Š
  const report = benchmark.generateReport();
  logger.info('æ€§èƒ½æµ‹è¯•æŠ¥å‘Šå·²ç”Ÿæˆ', { reportLength: report.length });
  
  // å¯ä»¥å°†æŠ¥å‘Šä¿å­˜åˆ°æ–‡ä»¶æˆ–å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
  // await fs.writeFile('performance-report.md', report);
}
```

## ğŸ“š å›¢é˜ŸåŸ¹è®­ä¸çŸ¥è¯†ä¼ æ‰¿

### 1. æ–°å›¢é˜Ÿæˆå‘˜å…¥èŒæŒ‡å—

```markdown
# 3AIé¡¹ç›®æ–°æˆå‘˜å…¥èŒæŒ‡å—

## æ¬¢è¿åŠ å…¥3AIå›¢é˜Ÿï¼

### ç¬¬ä¸€å¤©ï¼šç¯å¢ƒæ­å»º
- [ ] è·å–é¡¹ç›®è®¿é—®æƒé™
- [ ] å…‹éš†ä»£ç ä»“åº“
- [ ] å®‰è£…å¼€å‘ç¯å¢ƒï¼ˆNode.js, Docker, Redisç­‰ï¼‰
- [ ] è¿è¡Œé¡¹ç›®å¹¶è®¿é—®æœ¬åœ°ç¯å¢ƒ
- [ ] é˜…è¯»é¡¹ç›®READMEå’Œæ¶æ„æ–‡æ¡£

### ç¬¬ä¸€å‘¨ï¼šç†Ÿæ‚‰é¡¹ç›®
- [ ] å®Œæˆä»£ç èµ°è¯»ï¼ˆé‡ç‚¹å…³æ³¨æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰
- [ ] ç†è§£é¡¹ç›®æ¶æ„å’Œè®¾è®¡æ¨¡å¼
- [ ] å­¦ä¹ é¡¹ç›®ç¼–ç è§„èŒƒå’Œæœ€ä½³å®è·µ
- [ ] å®Œæˆç¬¬ä¸€ä¸ªå°åŠŸèƒ½å¼€å‘ï¼ˆå¦‚æ·»åŠ æ–°çš„APIç«¯ç‚¹ï¼‰
- [ ] å‚ä¸ä»£ç å®¡æŸ¥æµç¨‹

### ç¬¬äºŒå‘¨ï¼šæ·±å…¥å¼€å‘
- [ ] ç‹¬ç«‹å®Œæˆä¸­ç­‰å¤æ‚åº¦çš„åŠŸèƒ½å¼€å‘
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] å­¦ä¹ é¡¹ç›®çš„ç›‘æ§å’Œè°ƒè¯•å·¥å…·
- [ ] å‚ä¸æŠ€æœ¯è®¨è®ºå’Œå†³ç­–

### ç¬¬ä¸€ä¸ªæœˆï¼šæˆä¸ºè´¡çŒ®è€…
- [ ] èƒ½å¤Ÿç‹¬ç«‹è®¾è®¡å’Œå®ç°æ–°åŠŸèƒ½
- [ ] ä¸»åŠ¨å‘ç°å’Œä¿®å¤æŠ€æœ¯å€ºåŠ¡
- [ ] å‚ä¸æ¶æ„ä¼˜åŒ–è®¨è®º
- [ ] æŒ‡å¯¼å…¶ä»–æ–°æˆå‘˜
```

### 2. ä»£ç å®¡æŸ¥æœ€ä½³å®è·µåŸ¹è®­

```markdown
# ä»£ç å®¡æŸ¥æœ€ä½³å®è·µ

## å®¡æŸ¥è€…æŒ‡å—

### å®¡æŸ¥é‡ç‚¹
1. **åŠŸèƒ½æ­£ç¡®æ€§**ï¼šä»£ç æ˜¯å¦å®ç°äº†é¢„æœŸåŠŸèƒ½
2. **ä»£ç è´¨é‡**ï¼šæ˜¯å¦éµå¾ªç¼–ç è§„èŒƒå’Œæœ€ä½³å®è·µ
3. **æ€§èƒ½å½±å“**ï¼šæ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜æˆ–æ”¹è¿›ç©ºé—´
4. **å®‰å…¨æ€§**ï¼šæ˜¯å¦å­˜åœ¨å®‰å…¨æ¼æ´
5. **å¯ç»´æŠ¤æ€§**ï¼šä»£ç æ˜¯å¦æ˜“äºç†è§£å’Œä¿®æ”¹

### å®¡æŸ¥æŠ€å·§
- å…ˆç†è§£éœ€æ±‚å’Œè®¾è®¡æ„å›¾
- å…³æ³¨ä»£ç çš„å¯è¯»æ€§å’Œç®€æ´æ€§
- æ£€æŸ¥è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯å¤„ç†
- éªŒè¯æµ‹è¯•è¦†ç›–ç‡å’Œè´¨é‡
- æä¾›å»ºè®¾æ€§çš„åé¦ˆ

### åé¦ˆåŸåˆ™
- å¯¹äº‹ä¸å¯¹äººï¼Œä¿æŒä¸“ä¸šå’Œå‹å–„
- æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®
- è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦ä¿®æ”¹
- è®¤å¯å¥½çš„ä»£ç å®è·µ

## è¢«å®¡æŸ¥è€…æŒ‡å—

### æäº¤å‰å‡†å¤‡
- è‡ªæˆ‘å®¡æŸ¥ä»£ç 
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- ç¼–å†™æ¸…æ™°çš„æäº¤ä¿¡æ¯
- æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯

### å“åº”åé¦ˆ
- å¼€æ”¾æ¥å—å»ºè®®
- åŠæ—¶å›åº”å®¡æŸ¥æ„è§
- ä¸ç¡®å®šæ—¶ä¸»åŠ¨è¯¢é—®
- æ„Ÿè°¢å®¡æŸ¥è€…çš„æ—¶é—´å’Œå»ºè®®
```

## ğŸ¯ æ€»ç»“ä¸è¡ŒåŠ¨è®¡åˆ’

### ç«‹å³å®æ–½ï¼ˆæœ¬å‘¨ï¼‰
1. **å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹**ï¼šé…ç½®GitHub PRæ¨¡æ¿å’Œå®¡æŸ¥è§„åˆ™
2. **è®¾ç½®å¥åº·æ£€æŸ¥**ï¼šå®æ–½åŸºç¡€çš„å¥åº·æ£€æŸ¥ç«¯ç‚¹
3. **ç¯å¢ƒé…ç½®éªŒè¯**ï¼šç¡®ä¿æ‰€æœ‰ç¯å¢ƒå˜é‡æ­£ç¡®é…ç½®

### çŸ­æœŸç›®æ ‡ï¼ˆ1ä¸ªæœˆå†…ï¼‰
1. **å®Œå–„æ–‡æ¡£ä½“ç³»**ï¼šAPIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆå’ŒæŠ€æœ¯å†³ç­–è®°å½•
2. **æŠ€æœ¯å€ºåŠ¡ç®¡ç†**ï¼šå»ºç«‹æŠ€æœ¯å€ºåŠ¡è·Ÿè¸ªå’Œå¤„ç†æµç¨‹
3. **æ€§èƒ½åŸºå‡†**ï¼šå»ºç«‹æ€§èƒ½æµ‹è¯•åŸºå‡†å’Œç›‘æ§

### é•¿æœŸç›®æ ‡ï¼ˆ3ä¸ªæœˆå†…ï¼‰
1. **å›¢é˜ŸåŸ¹è®­**ï¼šå®Œæˆæ‰€æœ‰å›¢é˜Ÿæˆå‘˜çš„æœ€ä½³å®è·µåŸ¹è®­
2. **è‡ªåŠ¨åŒ–å®Œå–„**ï¼šCI/CDæµç¨‹å®Œå…¨è‡ªåŠ¨åŒ–
3. **ç›‘æ§ä½“ç³»**ï¼šå®Œæ•´çš„åº”ç”¨æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

### æˆåŠŸæŒ‡æ ‡
- ä»£ç å®¡æŸ¥è¦†ç›–ç‡ 100%
- å¹³å‡ä»£ç å®¡æŸ¥æ—¶é—´ < 24å°æ—¶
- æŠ€æœ¯å€ºåŠ¡å¤„ç†ç‡ > 80%
- å›¢é˜Ÿæˆå‘˜æ»¡æ„åº¦ > 90%
- ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%

---

**æ¨è€å¸ˆï¼Œè¿™äº›å›¢é˜Ÿåä½œå’Œé•¿æœŸç»´æŠ¤çš„æœ€ä½³å®è·µå°†ç¡®ä¿3AIé¡¹ç›®åœ¨å›¢é˜Ÿæ‰©å±•å’Œé•¿æœŸå‘å±•ä¸­ä¿æŒé«˜è´¨é‡å’Œé«˜æ•ˆç‡ã€‚å»ºè®®ä¼˜å…ˆå®æ–½ä»£ç å®¡æŸ¥æµç¨‹å’Œå¥åº·æ£€æŸ¥ç³»ç»Ÿï¼Œä¸ºé¡¹ç›®çš„å¯æŒç»­å‘å±•å¥ å®šåšå®åŸºç¡€ã€‚**

## ğŸš€ å¿«é€Ÿå®æ–½æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šå»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹ï¼ˆä»Šå¤©å®Œæˆï¼‰

```bash
# 1. åˆ›å»ºPRæ¨¡æ¿
mkdir -p .github/pull_request_template
echo "## å˜æ›´è¯´æ˜
- [ ] åŠŸèƒ½å˜æ›´
- [ ] Bugä¿®å¤
- [ ] é‡æ„
- [ ] æ–‡æ¡£æ›´æ–°

## æµ‹è¯•
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•å®Œæˆ

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„æ³¨é‡Š
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] è€ƒè™‘äº†æ€§èƒ½å½±å“
- [ ] è€ƒè™‘äº†å®‰å…¨æ€§" > .github/pull_request_template/default.md

# 2. é…ç½®åˆ†æ”¯ä¿æŠ¤è§„åˆ™ï¼ˆåœ¨GitHubè®¾ç½®ä¸­ï¼‰
# - è¦æ±‚PRå®¡æŸ¥
# - è¦æ±‚çŠ¶æ€æ£€æŸ¥é€šè¿‡
# - è¦æ±‚åˆ†æ”¯ä¸ºæœ€æ–°
```

### ç¬¬äºŒæ­¥ï¼šå®æ–½å¥åº·æ£€æŸ¥ï¼ˆæ˜å¤©å®Œæˆï¼‰

```typescript
// src/routes/health.ts
import { Router } from 'express';
import { HealthChecker } from '../health/HealthChecker';

const router = Router();
const healthChecker = new HealthChecker();

// ç®€å•å¥åº·æ£€æŸ¥
router.get('/health', (req, res) => {
  res.json({ status: 'ok', timestamp: new Date().toISOString() });
});

// è¯¦ç»†å¥åº·æ£€æŸ¥
router.get('/health/detailed', healthChecker.handleHealthCheck.bind(healthChecker));

export default router;
```

### ç¬¬ä¸‰æ­¥ï¼šæŠ€æœ¯å€ºåŠ¡è·Ÿè¸ªï¼ˆæœ¬å‘¨å®Œæˆï¼‰

```typescript
// åœ¨ä»£ç ä¸­æ·»åŠ æŠ€æœ¯å€ºåŠ¡æ ‡è®°
// TODO: [DEBT] é‡æ„ç”¨æˆ·éªŒè¯é€»è¾‘ - ä¼˜å…ˆçº§:é«˜ - é¢„ä¼°:8å°æ—¶
// FIXME: [DEBT] æ€§èƒ½ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ - ä¼˜å…ˆçº§:ä¸­ - é¢„ä¼°:4å°æ—¶
// HACK: [DEBT] ä¸´æ—¶è§£å†³æ–¹æ¡ˆéœ€è¦é‡æ„ - ä¼˜å…ˆçº§:ä½ - é¢„ä¼°:2å°æ—¶
```

## ğŸ“‹ å®æ–½æ£€æŸ¥æ¸…å•

### ä»£ç è´¨é‡ä¿è¯
- [ ] é…ç½®ESLintå’ŒPrettier
- [ ] è®¾ç½®pre-commité’©å­
- [ ] å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹
- [ ] é…ç½®è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] è®¾ç½®ä»£ç è¦†ç›–ç‡æŠ¥å‘Š

### å›¢é˜Ÿåä½œ
- [ ] åˆ›å»ºå›¢é˜Ÿç¼–ç è§„èŒƒæ–‡æ¡£
- [ ] å»ºç«‹æŠ€æœ¯å†³ç­–è®°å½•æµç¨‹
- [ ] è®¾ç½®å®šæœŸä»£ç å®¡æŸ¥ä¼šè®®
- [ ] åˆ›å»ºæ–°æˆå‘˜å…¥èŒæŒ‡å—
- [ ] å»ºç«‹çŸ¥è¯†åˆ†äº«æœºåˆ¶

### ç›‘æ§ä¸ç»´æŠ¤
- [ ] å®æ–½å¥åº·æ£€æŸ¥ç«¯ç‚¹
- [ ] é…ç½®åº”ç”¨æ€§èƒ½ç›‘æ§
- [ ] å»ºç«‹é”™è¯¯è¿½è¸ªç³»ç»Ÿ
- [ ] è®¾ç½®è‡ªåŠ¨åŒ–éƒ¨ç½²
- [ ] åˆ›å»ºè¿ç»´æ‰‹å†Œ

### æ–‡æ¡£ä¸åŸ¹è®­
- [ ] è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£
- [ ] åˆ›å»ºæ¶æ„å†³ç­–è®°å½•
- [ ] ç¼–å†™æ•…éšœæ’é™¤æŒ‡å—
- [ ] åˆ¶å®šå›¢é˜ŸåŸ¹è®­è®¡åˆ’
- [ ] å»ºç«‹æœ€ä½³å®è·µåº“

## ğŸ¯ å…³é”®æˆåŠŸå› ç´ 

### 1. é¢†å¯¼å±‚æ”¯æŒ
- ç®¡ç†å±‚å¯¹ä»£ç è´¨é‡çš„é‡è§†
- ä¸ºå›¢é˜Ÿæä¾›å……è¶³çš„æ—¶é—´å’Œèµ„æº
- æ”¯æŒæŠ€æœ¯å€ºåŠ¡çš„å®šæœŸæ¸…ç†

### 2. å›¢é˜Ÿæ–‡åŒ–
- é¼“åŠ±ä»£ç å®¡æŸ¥å’ŒçŸ¥è¯†åˆ†äº«
- å®¹å¿é”™è¯¯ï¼Œä»å¤±è´¥ä¸­å­¦ä¹ 
- æŒç»­æ”¹è¿›çš„å¿ƒæ€

### 3. å·¥å…·å’Œæµç¨‹
- è‡ªåŠ¨åŒ–å°½å¯èƒ½å¤šçš„é‡å¤æ€§å·¥ä½œ
- ç®€åŒ–å’Œæ ‡å‡†åŒ–å¼€å‘æµç¨‹
- æä¾›æœ‰æ•ˆçš„å¼€å‘å·¥å…·

### 4. æŒç»­å­¦ä¹ 
- å®šæœŸæŠ€æœ¯åˆ†äº«å’ŒåŸ¹è®­
- å…³æ³¨è¡Œä¸šæœ€ä½³å®è·µ
- é¼“åŠ±å®éªŒå’Œåˆ›æ–°

## ğŸ“Š åº¦é‡æŒ‡æ ‡

### ä»£ç è´¨é‡æŒ‡æ ‡
- ä»£ç è¦†ç›–ç‡ > 85%
- ä»£ç å¤æ‚åº¦ < 10
- æŠ€æœ¯å€ºåŠ¡æ¯”ä¾‹ < 20%
- ä»£ç å®¡æŸ¥è¦†ç›–ç‡ = 100%

### å›¢é˜Ÿæ•ˆç‡æŒ‡æ ‡
- å¹³å‡PRåˆå¹¶æ—¶é—´ < 24å°æ—¶
- ç¼ºé™·é€ƒé€¸ç‡ < 5%
- éƒ¨ç½²é¢‘ç‡ > æ¯å‘¨1æ¬¡
- å¹³å‡ä¿®å¤æ—¶é—´ < 4å°æ—¶

### ç³»ç»Ÿç¨³å®šæ€§æŒ‡æ ‡
- ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%
- å¹³å‡å“åº”æ—¶é—´ < 200ms
- é”™è¯¯ç‡ < 0.1%
- å®¹é‡åˆ©ç”¨ç‡ < 80%

## ğŸ”„ æŒç»­æ”¹è¿›å¾ªç¯

### æ¯å‘¨å›é¡¾
1. å®¡æŸ¥ä»£ç è´¨é‡æŒ‡æ ‡
2. è®¨è®ºé‡åˆ°çš„é—®é¢˜å’ŒæŒ‘æˆ˜
3. è¯†åˆ«æ”¹è¿›æœºä¼š
4. æ›´æ–°æœ€ä½³å®è·µ

### æ¯æœˆè¯„ä¼°
1. åˆ†æå›¢é˜Ÿæ•ˆç‡è¶‹åŠ¿
2. è¯„ä¼°æŠ€æœ¯å€ºåŠ¡çŠ¶å†µ
3. å®¡æŸ¥æ¶æ„å†³ç­–æ•ˆæœ
4. è§„åˆ’ä¸‹æœˆæ”¹è¿›é‡ç‚¹

### æ¯å­£åº¦è§„åˆ’
1. åˆ¶å®šæŠ€æœ¯å‘å±•è·¯çº¿å›¾
2. è¯„ä¼°å›¢é˜ŸæŠ€èƒ½éœ€æ±‚
3. è§„åˆ’é‡å¤§é‡æ„é¡¹ç›®
4. æ›´æ–°å›¢é˜ŸåŸ¹è®­è®¡åˆ’

---

## ğŸ’¡ ä¸“å®¶å»ºè®®

### å¯¹äºæ¨è€å¸ˆçš„ç‰¹åˆ«å»ºè®®

1. **æ¸è¿›å¼å®æ–½**ï¼šä¸è¦ä¸€æ¬¡æ€§å®æ–½æ‰€æœ‰æœ€ä½³å®è·µï¼Œé€‰æ‹©æœ€å…³é”®çš„å‡ ä¸ªå…ˆå¼€å§‹
2. **å›¢é˜Ÿå‚ä¸**ï¼šè®©å›¢é˜Ÿæˆå‘˜å‚ä¸åˆ¶å®šè§„èŒƒå’Œæµç¨‹ï¼Œæé«˜æ¥å—åº¦
3. **å·¥å…·æ”¯æŒ**ï¼šæŠ•èµ„å¥½çš„å¼€å‘å·¥å…·ï¼Œæé«˜å›¢é˜Ÿæ•ˆç‡
4. **å®šæœŸè¯„ä¼°**ï¼šå»ºç«‹å®šæœŸè¯„ä¼°æœºåˆ¶ï¼ŒåŠæ—¶è°ƒæ•´ç­–ç•¥
5. **çŸ¥è¯†ä¼ æ‰¿**ï¼šå»ºç«‹å®Œå–„çš„æ–‡æ¡£ä½“ç³»ï¼Œç¡®ä¿çŸ¥è¯†ä¸ä¼šå› äººå‘˜å˜åŠ¨è€Œä¸¢å¤±

### é£é™©æ§åˆ¶

1. **å˜æ›´ç®¡ç†**ï¼šä»»ä½•é‡å¤§å˜æ›´éƒ½è¦æœ‰å›æ»šè®¡åˆ’
2. **åŸ¹è®­æŠ•å…¥**ï¼šç¡®ä¿å›¢é˜Ÿæœ‰è¶³å¤Ÿçš„æ—¶é—´å­¦ä¹ æ–°çš„å·¥å…·å’Œæµç¨‹
3. **æ¸è¿›æ”¹è¿›**ï¼šé¿å…æ¿€è¿›çš„å˜é©ï¼Œé‡‡ç”¨æ¸è¿›å¼æ”¹è¿›
4. **ç›‘æ§åé¦ˆ**ï¼šå¯†åˆ‡ç›‘æ§å˜æ›´çš„æ•ˆæœï¼ŒåŠæ—¶è°ƒæ•´

### é•¿æœŸæ„¿æ™¯

é€šè¿‡å®æ–½è¿™äº›æœ€ä½³å®è·µï¼Œ3AIé¡¹ç›®å°†å…·å¤‡ï¼š
- **é«˜è´¨é‡çš„ä»£ç åº“**ï¼šæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- **é«˜æ•ˆçš„å›¢é˜Ÿåä½œ**ï¼šå‡å°‘æ²Ÿé€šæˆæœ¬ï¼Œæé«˜å¼€å‘æ•ˆç‡
- **ç¨³å®šçš„ç³»ç»Ÿè¿è¡Œ**ï¼šå‡å°‘æ•…éšœï¼Œæé«˜ç”¨æˆ·æ»¡æ„åº¦
- **æŒç»­çš„æŠ€æœ¯è¿›æ­¥**ï¼šä¿æŒæŠ€æœ¯æ ˆçš„å…ˆè¿›æ€§å’Œç«äº‰åŠ›

**æ¨è€å¸ˆï¼Œå»ºè®®ä»ä»£ç å®¡æŸ¥æµç¨‹å¼€å§‹ï¼Œè¿™æ˜¯æŠ•å…¥äº§å‡ºæ¯”æœ€é«˜çš„æ”¹è¿›æªæ–½ã€‚æœŸå¾…ä¸æ‚¨ä¸€èµ·å°†3AIé¡¹ç›®æ‰“é€ æˆæŠ€æœ¯å“è¶Šçš„å…¸èŒƒï¼**