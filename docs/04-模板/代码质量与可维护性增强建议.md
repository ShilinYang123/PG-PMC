# ä»£ç è´¨é‡ä¸å¯ç»´æŠ¤æ€§å¢å¼ºå»ºè®®

## æ¦‚è¿°

åŸºäºå½“å‰é¡¹ç›®ç»“æ„å’Œé…ç½®ï¼Œä»¥ä¸‹æ˜¯æå‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§çš„å…·ä½“å»ºè®®ã€‚

## 1. TypeScript é…ç½®ä¼˜åŒ–

### 1.1 ä¸¥æ ¼æ¨¡å¼é…ç½®

å½“å‰é…ç½®å·²ç»å¯ç”¨äº†ä¸¥æ ¼æ¨¡å¼ï¼Œå»ºè®®è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š

```json
{
  "compilerOptions": {
    // æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
    "noImplicitReturns": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "exactOptionalPropertyTypes": true,
    "noUncheckedIndexedAccess": true,
    
    // æ¨¡å—è§£æä¼˜åŒ–
    "moduleResolution": "bundler", // ç°ä»£æ„å»ºå·¥å…·
    "allowImportingTsExtensions": false,
    "verbatimModuleSyntax": true // TypeScript 5.0+
  }
}
```

### 1.2 è·¯å¾„åˆ«åæ ‡å‡†åŒ–

å»ºè®®ç»Ÿä¸€è·¯å¾„åˆ«åå‘½åè§„èŒƒï¼š

```json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./src/*"],
      "@components/*": ["./src/components/*"],
      "@utils/*": ["./src/utils/*"],
      "@types/*": ["./src/types/*"],
      "@assets/*": ["./src/assets/*"],
      "@config/*": ["./src/config/*"]
    }
  }
}
```

## 2. ä»£ç è§„èŒƒå·¥å…·é…ç½®

### 2.1 ESLint é…ç½®å¢å¼º

åŸºäºç°æœ‰çš„ `eslintrc.js`ï¼Œå»ºè®®æ·»åŠ ä»¥ä¸‹è§„åˆ™ï¼š

```javascript
module.exports = {
  extends: [
    '@typescript-eslint/recommended',
    '@typescript-eslint/recommended-requiring-type-checking',
    'plugin:import/recommended',
    'plugin:import/typescript'
  ],
  rules: {
    // å¯¼å…¥é¡ºåºè§„èŒƒ
    'import/order': ['error', {
      'groups': [
        'builtin',
        'external',
        'internal',
        'parent',
        'sibling',
        'index'
      ],
      'newlines-between': 'always',
      'alphabetize': { 'order': 'asc' }
    }],
    
    // TypeScript ç‰¹å®šè§„åˆ™
    '@typescript-eslint/no-unused-vars': 'error',
    '@typescript-eslint/explicit-function-return-type': 'warn',
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/prefer-nullish-coalescing': 'error',
    '@typescript-eslint/prefer-optional-chain': 'error'
  }
};
```

### 2.2 Prettier é…ç½®ä¼˜åŒ–

åŸºäºç°æœ‰çš„ `.prettierrc`ï¼Œå»ºè®®æ ‡å‡†åŒ–æ ¼å¼ï¼š

```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "endOfLine": "lf"
}
```

## 3. æµ‹è¯•ç­–ç•¥å¢å¼º

### 3.1 Jest é…ç½®ä¼˜åŒ–

åŸºäºç°æœ‰çš„ `jest_config.js`ï¼Œå»ºè®®æ·»åŠ ï¼š

```javascript
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  
  // è¦†ç›–ç‡é…ç½®
  collectCoverage: true,
  coverageDirectory: 'coverage',
  coverageReporters: ['text', 'lcov', 'html'],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80
    }
  },
  
  // æµ‹è¯•æ–‡ä»¶æ¨¡å¼
  testMatch: [
    '**/__tests__/**/*.(ts|tsx|js)',
    '**/*.(test|spec).(ts|tsx|js)'
  ],
  
  // æ¨¡å—æ˜ å°„ï¼ˆå¯¹åº” tsconfig è·¯å¾„åˆ«åï¼‰
  moduleNameMapping: {
    '^@/(.*)$': '<rootDir>/src/$1',
    '^@components/(.*)$': '<rootDir>/src/components/$1',
    '^@utils/(.*)$': '<rootDir>/src/utils/$1'
  }
};
```

### 3.2 æµ‹è¯•åˆ†å±‚ç­–ç•¥

å»ºè®®å®æ–½ä¸‰å±‚æµ‹è¯•ç­–ç•¥ï¼š

1. **å•å…ƒæµ‹è¯•** (`tests/unit/`)
   - æµ‹è¯•å•ä¸ªå‡½æ•°å’Œç±»
   - å¿«é€Ÿæ‰§è¡Œï¼Œé«˜è¦†ç›–ç‡

2. **é›†æˆæµ‹è¯•** (`tests/integration/`)
   - æµ‹è¯•æ¨¡å—é—´äº¤äº’
   - æ•°æ®åº“ã€API é›†æˆ

3. **ç«¯åˆ°ç«¯æµ‹è¯•** (`tests/e2e/`)
   - å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•
   - ä½¿ç”¨ Playwright æˆ– Cypress

## 4. ä»£ç ç»„ç»‡ç»“æ„ä¼˜åŒ–

### 4.1 æ¨èç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶
â”‚   â””â”€â”€ feature/        # åŠŸèƒ½ç‰¹å®šç»„ä»¶
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ services/           # API æœåŠ¡å±‚
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/              # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â””â”€â”€ assets/             # é™æ€èµ„æº
```

### 4.2 æ–‡ä»¶å‘½åè§„èŒƒ

- **ç»„ä»¶æ–‡ä»¶**: `PascalCase.tsx`
- **å·¥å…·å‡½æ•°**: `camelCase.ts`
- **ç±»å‹å®šä¹‰**: `PascalCase.types.ts`
- **å¸¸é‡æ–‡ä»¶**: `UPPER_SNAKE_CASE.ts`
- **æµ‹è¯•æ–‡ä»¶**: `fileName.test.ts`

## 5. æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 5.1 æ„å»ºä¼˜åŒ–

åœ¨ `package.json` ä¸­æ·»åŠ æ€§èƒ½åˆ†æè„šæœ¬ï¼š

```json
{
  "scripts": {
    "analyze": "npm run build && npx webpack-bundle-analyzer dist/static/js/*.js",
    "build:profile": "npm run build -- --profile",
    "type-check:watch": "tsc --noEmit --watch"
  }
}
```

### 5.2 ä»£ç åˆ†å‰²ç­–ç•¥

```typescript
// è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
const HomePage = lazy(() => import('@/pages/HomePage'));
const AboutPage = lazy(() => import('@/pages/AboutPage'));

// ç»„ä»¶çº§åˆ«çš„æ‡’åŠ è½½
const HeavyComponent = lazy(() => import('@/components/HeavyComponent'));
```

## 6. æ–‡æ¡£åŒ–å»ºè®®

### 6.1 ä»£ç æ³¨é‡Šè§„èŒƒ

```typescript
/**
 * è®¡ç®—ç”¨æˆ·å¹´é¾„
 * @param birthDate - å‡ºç”Ÿæ—¥æœŸ
 * @param referenceDate - å‚è€ƒæ—¥æœŸï¼Œé»˜è®¤ä¸ºå½“å‰æ—¥æœŸ
 * @returns å¹´é¾„ï¼ˆæ•´æ•°ï¼‰
 * @example
 * ```typescript
 * const age = calculateAge(new Date('1990-01-01'));
 * console.log(age); // 34
 * ```
 */
function calculateAge(
  birthDate: Date,
  referenceDate: Date = new Date()
): number {
  // å®ç°é€»è¾‘
}
```

### 6.2 README æ–‡æ¡£ç»“æ„

å»ºè®®åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºå®Œæ•´çš„ README.mdï¼š

```markdown
# é¡¹ç›®åç§°

## å¿«é€Ÿå¼€å§‹
- å®‰è£…ä¾èµ–
- å¼€å‘ç¯å¢ƒå¯åŠ¨
- æ„å»ºéƒ¨ç½²

## æŠ€æœ¯æ ˆ
- TypeScript
- React/Vue/Angular
- æ„å»ºå·¥å…·

## é¡¹ç›®ç»“æ„
- ç›®å½•è¯´æ˜
- å‘½åè§„èŒƒ

## å¼€å‘æŒ‡å—
- ä»£ç è§„èŒƒ
- æäº¤è§„èŒƒ
- æµ‹è¯•è¦æ±‚

## API æ–‡æ¡£
- æ¥å£è¯´æ˜
- æ•°æ®æ ¼å¼
```

## 7. CI/CD æµç¨‹ä¼˜åŒ–

### 7.1 GitHub Actions é…ç½®

åˆ›å»º `.github/workflows/ci.yml`ï¼š

```yaml
name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - run: npm ci
      - run: npm run lint
      - run: npm run type-check
      - run: npm run test
      - run: npm run build
```

### 7.2 ä»£ç è´¨é‡é—¨ç¦

```json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  },
  "lint-staged": {
    "*.{ts,tsx}": [
      "eslint --fix",
      "prettier --write",
      "git add"
    ]
  }
}
```

## 8. ç›‘æ§å’Œæ—¥å¿—

### 8.1 é”™è¯¯ç›‘æ§

```typescript
// å…¨å±€é”™è¯¯å¤„ç†
window.addEventListener('error', (event) => {
  console.error('Global error:', event.error);
  // å‘é€åˆ°ç›‘æ§æœåŠ¡
});

window.addEventListener('unhandledrejection', (event) => {
  console.error('Unhandled promise rejection:', event.reason);
  // å‘é€åˆ°ç›‘æ§æœåŠ¡
});
```

### 8.2 æ€§èƒ½ç›‘æ§

```typescript
// æ€§èƒ½æŒ‡æ ‡æ”¶é›†
const observer = new PerformanceObserver((list) => {
  for (const entry of list.getEntries()) {
    if (entry.entryType === 'navigation') {
      console.log('Page load time:', entry.loadEventEnd - entry.loadEventStart);
    }
  }
});

observer.observe({ entryTypes: ['navigation', 'paint', 'largest-contentful-paint'] });
```

## 9. å®‰å…¨æ€§å¢å¼º

### 9.1 ä¾èµ–å®‰å…¨æ£€æŸ¥

```json
{
  "scripts": {
    "security:audit": "npm audit",
    "security:fix": "npm audit fix",
    "security:check": "npx audit-ci --moderate"
  }
}
```

### 9.2 ç¯å¢ƒå˜é‡ç®¡ç†

```typescript
// ç¯å¢ƒå˜é‡éªŒè¯
const requiredEnvVars = ['API_URL', 'APP_ENV'] as const;

for (const envVar of requiredEnvVars) {
  if (!process.env[envVar]) {
    throw new Error(`Missing required environment variable: ${envVar}`);
  }
}
```

## 10. å®æ–½ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å®æ–½ï¼‰
1. âœ… TypeScript é…ç½®ä¼˜åŒ–ï¼ˆå·²å®Œæˆï¼‰
2. ğŸ”„ ESLint/Prettier è§„åˆ™å®Œå–„
3. ğŸ”„ æµ‹è¯•è¦†ç›–ç‡æå‡

### ä¸­ä¼˜å…ˆçº§ï¼ˆè¿‘æœŸå®æ–½ï¼‰
1. ğŸ“‹ CI/CD æµç¨‹å»ºç«‹
2. ğŸ“‹ ä»£ç è´¨é‡é—¨ç¦
3. ğŸ“‹ æ–‡æ¡£å®Œå–„

### ä½ä¼˜å…ˆçº§ï¼ˆé•¿æœŸè§„åˆ’ï¼‰
1. ğŸ“‹ æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
2. ğŸ“‹ å®‰å…¨æ‰«æé›†æˆ
3. ğŸ“‹ è‡ªåŠ¨åŒ–éƒ¨ç½²ä¼˜åŒ–

## æ€»ç»“

é€šè¿‡å®æ–½ä»¥ä¸Šå»ºè®®ï¼Œé¡¹ç›®å°†è·å¾—ï¼š

- **æ›´é«˜çš„ä»£ç è´¨é‡**: ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥å’Œä»£ç è§„èŒƒ
- **æ›´å¥½çš„å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„é¡¹ç›®ç»“æ„å’Œæ–‡æ¡£
- **æ›´å¼ºçš„ç¨³å®šæ€§**: å®Œå–„çš„æµ‹è¯•è¦†ç›–å’Œé”™è¯¯å¤„ç†
- **æ›´å¿«çš„å¼€å‘æ•ˆç‡**: è‡ªåŠ¨åŒ–å·¥å…·å’Œæ ‡å‡†åŒ–æµç¨‹

å»ºè®®æŒ‰ç…§ä¼˜å…ˆçº§é€æ­¥å®æ–½ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µçš„æ”¹è¿›éƒ½èƒ½å¸¦æ¥å®é™…ä»·å€¼ã€‚